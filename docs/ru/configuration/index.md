---
title: Конфигурация
description: Узнайте, как настроить archlint с помощью .archlint.yaml, определить архитектурные слои и настроить правила для детекторов.
---

# Конфигурация

archlint можно настроить с помощью файла `.archlint.yaml` в корне вашего проекта. Если конфигурационный файл не найден, инструмент использует разумные значения по умолчанию для всех детекторов.

## Структура конфигурационного файла

```yaml
# Файлы и директории для игнорирования (глобально)
ignore:
  - '**/dist/**'
  - '**/node_modules/**'

# Алиасы путей (аналогично tsconfig.json или webpack)
aliases:
  '@/*': 'src/*'

# Расширение из встроенных или кастомных пресетов
extends:
  - nestjs
  - ./my-company-preset.yaml

# Точки входа для анализа (используются для поиска мертвого кода)
entry_points:
  - 'src/main.ts'

# Настройка правил для каждого детектора
rules:
  # Короткая форма: только уровень серьезности или "off"
  cycles: error
  dead_code: warn

  # Полная форма: с дополнительными параметрами
  god_module:
    severity: error
    enabled: true
    exclude: ['**/generated/**']
    # Специфичные для детектора параметры
    fan_in: 15
    fan_out: 15
    churn: 20

# Переопределения правил для конкретных путей
overrides:
  - files: ['**/legacy/**']
    rules:
      complexity: warn
      god_module: off

# Настройка оценки и грейдинга
scoring:
  # Минимальный уровень серьезности для отображения (info, warn, error, critical)
  minimum: warn
  # Веса для расчета общего балла
  weights:
    critical: 100
    high: 50
    medium: 20
    low: 5
  # Пороги для получения оценки (Density = Total Score / Files)
  grade_rules:
    excellent: 1.0
    good: 3.0
    fair: 7.0
    moderate: 15.0
    poor: 30.0

# Автоматическое определение фреймворка (по умолчанию true)
auto_detect_framework: true

# Включить анализ истории Git (по умолчанию true)
enable_git: true

# Настройки Git
git:
  history_period: '1y'
```

## Уровни серьезности (Severity)

В секции `rules` вы можете использовать следующие уровни:

- `critical`: Критическая проблема, требующая немедленного исправления.
- `error`: Ошибка архитектуры.
- `warn`: Предупреждение о потенциальной проблеме.
- `info`: Информационное сообщение.
- `off`: Полностью отключает детектор.

## Конфигурация через CLI

Вы можете указать путь к конфигурационному файлу явно:

```bash
archlint scan --config custom-config.yaml
```

## Расширение (Extends)

Поле `extends` позволяет загружать пресеты из различных источников:

- **Встроенные пресеты**: `nestjs`, `nextjs`, `react`, `oclif`.
- **Локальные файлы**: Относительный путь к YAML-файлу (например, `./archlint-shared.yaml`).
- **URL**: Прямая ссылка на YAML-файл (например, `https://example.com/preset.yaml`).

Пресеты объединяются в том порядке, в котором они указаны. Конфигурация пользователя всегда имеет наивысший приоритет.
