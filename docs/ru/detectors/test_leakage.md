# Утечка тестов (Test Leakage)

**ID:** `test_leakage` | **Степень критичности:** Высокая (по умолчанию)

Выявляет рабочий код (production code), который импортирует что-либо из тестовых или мок-файлов.

## Почему это «запах»

Находит рабочий (production) код, который тайно импортирует что-то из ваших тестов или моков.

- **Тесты в продакшене**: Вы же не хотите, чтобы ваш бандл весил на 5МБ больше из-за моков и тестовых утилит? Это стыдно и замедляет работу приложения для пользователей.
- **Риски безопасности**: Тесты часто содержат тестовые доступы или упрощенную логику, которой вообще не место в реальном окружении.
- **Поломка сборки**: Многие инструменты сборки игнорируют `*.test.ts` при создании продакшн-версии. Если ваш основной код зависит от них, приложение просто не соберется или упадет в рантайме.

## Как исправить

- Перенесите общую логику из тестового файла в место, безопасное для использования в продакшене.
- Проверьте правильность путей импорта.

## Конфигурация

```yaml
rules:
  test_leakage:
    severity: high
    test_patterns:
      - '**/*.test.ts'
      - '**/*.spec.ts'
      - '**/__tests__/**'
```

### Параметры по умолчанию

- `test_patterns`: список паттернов файлов, которые считаются тестовыми:
  - `'**/*.test.ts'`
  - `'**/*.test.js'`
  - `'**/*.spec.ts'`
  - `'**/*.spec.js'`
  - `'**/__tests__/**'`
  - `'**/__mocks__/**'`
