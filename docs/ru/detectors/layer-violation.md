# Нарушение слоев

**ID:** `layer_violation` | **Severity:** High (default)

Нарушение слоев (Layer violation) возникает, когда код в одном архитектурном слое импортирует код из слоя, о котором он не должен знать (например, слой Domain импортирует из Infrastructure).

## Почему это запах

- **Нарушает абстракцию**: Детали внутренней реализации просачиваются в высокоуровневую бизнес-логику.
- **Сложность тестирования**: Бизнес-логику становится трудно тестировать без моков для инфраструктуры (БД, API и т.д.).
- **Жесткость**: Изменение базы данных или внешней библиотеки требует изменения основной бизнес-логики.

## Конфигурация

Вы должны определить свои слои в `.archlint.yaml`:

```yaml
layers:
  - name: domain
    paths: ['**/domain/**']
    can_import: [] # Domain ничего не импортирует

  - name: application
    paths: ['**/application/**']
    can_import: ['domain']

  - name: infrastructure
    paths: ['**/infrastructure/**']
    can_import: ['domain', 'application']
```

## Как исправить

1. **Инверсия зависимостей**: Определите интерфейс в более высоком слое (Domain) и реализуйте его в более низком слое (Infrastructure).
2. **Рефакторинг**: Перенесите ошибочно размещенный код в соответствующий слой.
