# Божественный модуль

**ID:** `god_module` | **Степень критичности:** Высокая (по умолчанию)

«Божественный модуль» (God Module) — это тот самый файл в проекте, который все боятся трогать, потому что он делает вообще всё. Обычно он рождается как безобидный хелпер, но постепенно превращается в монстра, который одновременно разруливает авторизацию, запросы к БД и состояние UI.

## Почему это «запах»

- **Кошмар единственной ответственности**: Когда модуль отвечает за всё сразу, любое изменение — даже самое мелкое — превращается в игру в «Дженгу» с вашей архитектурой.
- **Магнит для конфликтов**: Поскольку это «центр вселенной», каждый разработчик в команде постоянно что-то в нем правит, что гарантирует бесконечные конфликты при мерже.
- **Хрупкость**: Изменения в одном углу модуля могут внезапно «выстрелить» в другом, потому что внутри всё неявно связано.
- **Головная боль при тестировании**: Вам не должно быть нужно мокать базу данных и почтовый сервис только для того, чтобы протестировать форматирование строки.

## Критерии обнаружения

`archlint` идентифицирует Божественные модули на основе:

- **Fan-in**: Количество других модулей, зависящих от него.
- **Fan-out**: Количество модулей, от которых зависит он.
- **Churn**: Частота изменений в git.

## Как исправить

1. **Определите обязанности**: Составьте список всех различных задач, которые выполняет модуль.
2. **Извлеките модули**: Разбейте файл на более мелкие, сфокусированные модули.
3. **Паттерн Фасад**: Если модуль выступает в роли координатора, оставьте в нем только логику координации, а работу делегируйте подмодулям.

## Конфигурация

```yaml
rules:
  god_module:
    severity: high # или medium / low / off
    fan_in: 10 # По умолчанию: 10
    fan_out: 10 # По умолчанию: 10
    churn: 20 # По умолчанию: 20
    exclude: [] # Исключить файлы
```

## ESLint правило

Этот детектор доступен как правило ESLint для получения обратной связи в реальном времени.

```javascript
// eslint.config.js
export default [
  {
    rules: {
      '@archlinter/no-god-modules': 'warn',
    },
  },
];
```

Смотрите [Интеграция с ESLint](/ru/integrations/eslint) для инструкций по настройке.

### Параметры по умолчанию

- `fan_in`: `10` - минимальное количество модулей, зависящих от данного модуля
- `fan_out`: `10` - минимальное количество модулей, от которых зависит данный модуль
- `churn`: `20` - минимальное количество изменений файла в git (требует `git: { enabled: true }`)
