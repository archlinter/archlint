# Кластеры циклических зависимостей

**ID:** `cycle_clusters` | **Severity:** Critical (default)

Кластер циклических зависимостей — это когда циклы в вашем коде начинают «размножаться». Это уже не просто петля «А зависит от Б, а Б от А», а целый клубок, в котором десяток модулей намертво запутаны друг с другом.

## Почему это плохо

- **Архитектурная деградация**: Это верный признак того, что границы ваших модулей окончательно рухнули.
- **Эффект «Монолита»**: Вы не можете просто «одолжить» один модуль из кластера — вам придется тащить за собой весь этот запутанный узел. Это пакетное предложение, о котором вы не просили.
- **Невозможность изоляции**: Хотите протестировать одну функцию? Удачи, теперь вам придется мокать половину кодовой базы, потому что всё связано со всем.
- **Кошмар поддержки**: Любое изменение в кластере может вызвать непредсказуемый «эффект бабочки», который сломает что-то на другом конце этого клубка.

## Примеры

### Плохо

Группа модулей в директории "core", где почти каждый модуль импортирует несколько других из той же директории, создавая множество перекрывающихся циклов.

### Хорошо

Модули должны быть организованы в иерархию или иметь четкое разделение на основе интерфейсов, чтобы циклы не образовывали кластеры.

## Конфигурация

```yaml
rules:
  cycle_clusters:
    severity: high
    max_cluster_size: 5
```

## Как исправить

1. **Разрыв узла**: Определите "узловые" модули, которые участвуют в нескольких циклах, и разделите их в первую очередь.
2. **Слоистость**: Обеспечьте строгое соблюдение правил многослойности, чтобы предотвратить горизонтальные или восходящие зависимости.
3. **Рефакторинг монолитов**: Часто кластеры являются признаком того, что один большой модуль был разделен неправильно. Рассмотрите возможность слияния или повторного разделения по другим границам.
