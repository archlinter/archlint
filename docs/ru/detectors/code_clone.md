# Дублирование кода (Code Clone)

**ID:** `code_clone` | **Степень критичности:** Средняя (по умолчанию)

Этот детектор находит места, где кто-то решил пойти коротким путем «копипаста». Он ищет идентичную логику, продублированную в разных частях проекта.

## Почему это «запах»

- **Размножение багов**: Если вы найдете баг в одной копии, вам нужно не забыть исправить его еще в четырех. Спойлер: про одну обычно забывают.
- **Лишняя работа**: Каждый раз, когда нужно изменить логику, вы делаете одну и ту же работу снова и снова.
- **Рассинхрон**: Со временем одна копия обновляется, а другая — нет, и внезапно ваша «идентичная» логика начинает вести себя по-разному в разных частях приложения.

## Как исправить

1. **Extract Method**: Вынесите общую логику в отдельную функцию и вызывайте её из нескольких мест.
2. **Generic Components**: Для UI-кода создайте переиспользуемый компонент с пропсами.
3. **Utility Modules**: Перенесите общую вспомогательную логику в общий утилитарный файл.

## Конфигурация

```yaml
rules:
  code_clone:
    enabled: true
    severity: medium
    min_tokens: 50
    min_lines: 6
```

### Параметры

- `min_tokens`: Минимальное количество нормализованных токенов для детекции дубликата (по умолчанию: 50).
- `min_lines`: Минимальное количество строк, которое должен занимать дубликат (по умолчанию: 6).

## ESLint правило

Этот детектор доступен как правило ESLint для получения обратной связи в реальном времени.

```javascript
// eslint.config.js
export default [
  {
    rules: {
      '@archlinter/no-code-clone': 'warn',
    },
  },
];
```

Смотрите [Интеграция с ESLint](/ru/integrations/eslint) для инструкций по настройке.
