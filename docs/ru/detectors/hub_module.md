# Модуль-концентратор

**ID:** `hub_module` | **Степень критичности:** Средняя (по умолчанию)

«Модуль-концентратор» — это как оживленный перекресток, на котором забыли поставить светофоры. Это файл, от которого все зависят. Он сам зависит от всех подряд, но при этом в нем почти нет собственной логики.

## Почему это «запах»

Концентраторы — это опасные «единые точки отказа». Поскольку они находятся в самом центре всех путей, они становятся невероятно хрупкими. Малейшая правка в таком модуле может разлететься волной багов по всему проекту. Это тот самый файл, который страшнее всего рефакторить, потому что он — главное «бутылочное горлышко» вашей архитектуры.

## Примеры

### Плохо

Модуль, который просто реэкспортирует или координирует множество несвязанных сервисов и сам используется всем приложением.

```typescript
// app-hub.ts
import { AuthService } from './auth';
import { ApiService } from './api';
import { LoggerService } from './logger';
import { ConfigService } from './config';
// ... еще 10 импортов

export class AppHub {
  constructor(
    public auth: AuthService,
    public api: ApiService,
    public logger: LoggerService
    // ... еще 10 зависимостей
  ) {}
}
```

### Хорошо

Разбейте концентратор на конкретные, сфокусированные координаторы или используйте внедрение зависимостей на уровне потребителя, чтобы избежать центрального узла.

```typescript
// auth-coordinator.ts (сфокусирован на координации аутентификации)
import { AuthService } from './auth';
import { SessionStore } from './session';

export class AuthCoordinator {
  constructor(
    private auth: AuthService,
    private session: SessionStore
  ) {}
}
```

## Конфигурация

```yaml
rules:
  hub_module:
    severity: medium
    min_fan_in: 5
    min_fan_out: 5
    max_complexity: 5
```

## ESLint правило

Этот детектор доступен как правило ESLint для получения обратной связи в реальном времени.

```javascript
// eslint.config.js
export default [
  {
    rules: {
      '@archlinter/no-hub-modules': 'warn',
    },
  },
];
```

Смотрите [Интеграция с ESLint](/ru/integrations/eslint) для инструкций по настройке.

## Как исправить

Разбейте концентратор! Определите различные пути передачи данных или управления, проходящие через концентратор, и выделите их в отдельные, более узкоспециализированные модули.

### Параметры по умолчанию

- `min_fan_in`: `5` - минимальное количество модулей, зависящих от данного модуля
- `min_fan_out`: `5` - минимальное количество модулей, от которых зависит данный модуль
- `max_complexity`: `5` - максимальная цикломатическая сложность модуля
