# Цикломатическая сложность (Cyclomatic Complexity)

**ID:** `cyclomatic_complexity` | **Степень критичности:** Средняя (по умолчанию)

Цикломатическая сложность — это мера того, сколько различных путей может принять выполнение кода. Проще говоря, это коэффициент «спагетти» из ваших `if-else` и `switch`.

## Почему это «запах»

- **Ментальный лабиринт**: Каждый `if`, `else` и `case` добавляет новый поворот в лабиринте. Если у функции 20 путей, будьте уверены — рано или поздно разработчик в них заблудится.
- **Ад для тестирования**: Чтобы по-настоящему проверить сложную функцию, вам понадобится тест-кейс для каждого пути. В реальности это значит, что половина веток никогда не будет протестирована.
- **«Эффект бабочки»**: В сверхсложных функциях изменение одной строки может иметь странные и непредсказуемые последствия в пяти ветках от места правки.

## Как исправить

1. **Extract Method**: Разбейте сложную логику на более мелкие именованные функции.
2. **Guard Clauses**: Используйте ранние возвраты (early returns), чтобы уменьшить уровень вложенности.
3. **Replace Conditional with Polymorphism**: Используйте объекты или стратегии вместо огромных блоков `switch` или `if/else`.

## Конфигурация

```yaml
rules:
  cyclomatic_complexity:
    severity: medium
    max_complexity: 15
```

## ESLint правило

Этот детектор доступен как правило ESLint для получения обратной связи в реальном времени.

```javascript
// eslint.config.js
export default [
  {
    rules: {
      '@archlinter/no-high-cyclomatic-complexity': 'warn',
    },
  },
];
```

Смотрите [Интеграция с ESLint](/ru/integrations/eslint) для инструкций по настройке.

### Параметры по умолчанию

- `function_threshold`: `10` - максимальная цикломатическая сложность функции
- `file_threshold`: `50` - максимальная цикломатическая сложность файла
