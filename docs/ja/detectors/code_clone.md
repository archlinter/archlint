# コードクローン

**ID:** `code_clone` | **重要度:** 中 (デフォルト)

この検出器は、誰かが「コピー＆ペースト」のショートカットを使った場所を見つけます。プロジェクト全体で複製された同一のロジックを探します。

## なぜこれが「におい」なのか

- **バグが増殖する**: 1つのコピーでバグを見つけたら、他の4つでも修正しなければならないことを覚えておかなければなりません。ネタバレ：通常、1つ忘れます。
- **メンテナンスコストの増大**: 特定のロジックがどう動作するかを変更したいとき、同じ作業を何度も繰り返すことになります。
- **不整合な進化**: やがて、1つのコピーは更新されるのに別のコピーは更新されず、突然「同一」だったロジックがアプリの異なる部分で異なる動作をし始めます。

## 修正方法

1. **メソッドの抽出 (Extract Method)**: 共有ロジックを単一の関数に移動し、複数の場所から呼び出すようにします。
2. **汎用コンポーネント**: UIコードの場合は、プロップスを持つ再利用可能なコンポーネントを作成します。
3. **ユーティリティモジュール**: 共通のヘルパーロジックを共有ユーティリティファイルに移動します。

## 設定

```yaml
rules:
  code_clone:
    enabled: true
    severity: medium
    min_tokens: 50
    min_lines: 6
```

### オプション

- `min_tokens`: クローン検出をトリガーする最小正規化トークン数（デフォルト: 50）。
- `min_lines`: クローンがまたがる最小行数（デフォルト: 6）。

## ESLint ルール

この検出器は、エディタでリアルタイムのフィードバックを得るための ESLint ルールとして利用可能です。

```javascript
// eslint.config.js
export default [
  {
    rules: {
      '@archlinter/no-code-clone': 'warn',
    },
  },
];
```

セットアップ方法については、[ESLint 統合](/ja/integrations/eslint)を参照してください。
